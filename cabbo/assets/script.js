function populateCapabilities(){const e=document.getElementById("capabilities-grid");if(!e||!window.i18n||!window.i18n.loaded)return;const n=window.i18n.get("data.capabilities",[]);e.innerHTML="",n.forEach(n=>{const t=document.createElement("div");t.className="bg-white rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow duration-300",t.innerHTML=`\n            <h3 class="text-xl font-bold text-brand-green mb-2">${n.name||window.i18n.get("fallbacks.capability")}</h3>\n            <p class="text-brand-charcoal">${n.description||window.i18n.get("fallbacks.descriptionNotAvailable")}</p>\n        `,e.appendChild(t)})}function populateUseCases(){function e(){if(d){d.innerHTML="",[...c,...m].forEach(e=>{const t=document.createElement("button");t.textContent=e,t.className="px-4 py-2 rounded-xl bg-brand-sage text-white mb-2 mr-2 transition-all duration-200 hover:bg-brand-green",t.dataset.filter=e,t.onclick=()=>{const e=d.querySelector(".bg-brand-green");e&&e.classList.remove("bg-brand-green"),t.classList.add("bg-brand-green"),l.value="",n()},d.appendChild(t)});const e=document.createElement("button");e.textContent=window.i18n.get("sections.useCases.showAll","Show All"),e.className="px-4 py-2 rounded-xl bg-brand-green text-white mb-2 transition-all duration-200 hover:bg-green-700",e.onclick=()=>{const t=d.querySelector(".bg-brand-green");t&&t.classList.remove("bg-brand-green"),e.classList.add("bg-brand-green"),n()},d.appendChild(e)}}function n(){if(!i)return;const e=d.querySelector(".bg-brand-green"),n=e&&e.textContent===window.i18n.get("sections.useCases.showAll","Show All");t(r.filter(t=>{const a=n||!e||t["User Segment"]?.includes(e.textContent.trim())||t.Category?.replace(/"/g,"").includes(e.textContent.trim()),s=!l||t["Use Cases"]?.toLowerCase().includes(l.value.toLowerCase().trim())||t["Why (Impact)"]?.toLowerCase().includes(l.value.toLowerCase().trim())||t["User Segment"]?.toLowerCase().includes(l.value.toLowerCase().trim())||t.Category?.toLowerCase().includes(l.value.toLowerCase().trim());return a&&s}))}function t(e){if(i){if(0===e.length){const e=document.createElement("div");return e.className="col-span-full text-center text-brand-charcoal",e.innerHTML=`\n                <p class="text-xl">${window.i18n.get("sections.useCases.noResults.title","No use cases found")}</p>\n                <p class="text-sm">${window.i18n.get("sections.useCases.noResults.subtitle","Try adjusting your search or filter")}</p>\n            `,i.innerHTML="",void i.appendChild(e)}i.innerHTML="",e.forEach(e=>{const n=document.createElement("div");n.className="bg-white rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow duration-300 cursor-pointer",n.innerHTML=`\n                <h3 class="text-xl font-bold text-brand-green mb-2">${e["Use Cases"]||window.i18n.get("fallbacks.useCase")}</h3>\n                <p class="text-brand-charcoal mb-2">${e["Why (Impact)"]||window.i18n.get("fallbacks.descriptionNotAvailable")}</p>\n                <div class="text-sm text-brand-sage">\n                    <strong>${window.i18n?window.i18n.get("modals.useCase.userSegment","User Segment"):"User Segment"}:</strong> ${e["User Segment"]||window.i18n.get("fallbacks.notSpecified")}\n                    <br>\n                    <strong>${window.i18n?window.i18n.get("modals.useCase.category","Category"):"Category"}:</strong> ${e.Category?.replace(/"/g,"")||window.i18n.get("fallbacks.notSpecified")}\n                </div>\n            `,n.addEventListener("click",()=>{a(e)}),i.appendChild(n)})}}function a(e){g&&u&&(u.innerHTML=`\n                <h2 class="text-3xl font-bold text-brand-green mb-4">${e["Use Cases"]}</h2>\n                \n                <div class="grid md:grid-cols-2 gap-6">\n                    <div>\n                        <h3 class="text-xl font-semibold text-brand-sage mb-2">${window.i18n.get("modals.useCase.impact","Impact")}</h3>\n                        <p class="text-brand-charcoal mb-4">${e["Why (Impact)"]}</p>\n                        \n                        <h3 class="text-xl font-semibold text-brand-sage mb-2">${window.i18n.get("modals.useCase.userSegment","User Segment")}</h3>\n                        <p class="text-brand-charcoal mb-4">${e["User Segment"]}</p>\n                        \n                        <h3 class="text-xl font-semibold text-brand-sage mb-2">${window.i18n.get("modals.useCase.category","Category")}</h3>\n                        <p class="text-brand-charcoal mb-4">${e.Category?.replace(/"/g,"")||window.i18n.get("fallbacks.notSpecified")}</p>\n                    </div>\n                    \n                    <div>\n                        <h3 class="text-xl font-semibold text-brand-sage mb-2">${window.i18n.get("modals.useCase.features","Features")}</h3>\n                        <ul class="list-disc list-inside text-brand-charcoal">\n                            ${e.Features.split(", ").map(e=>`<li>${e}</li>`).join("")}\n                        </ul>\n                        \n                        <h3 class="text-xl font-semibold text-brand-sage mt-4 mb-2">${window.i18n.get("modals.useCase.workflow","Workflow")}</h3>\n                        <div class="text-brand-charcoal bg-brand-offwhite p-4 rounded-xl">\n                            <p>${e["How (Inputs \u2192 AI Workflow \u2192 Output)"]}</p>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class="mt-6 grid grid-cols-3 gap-4">\n                    <div class="bg-brand-offwhite p-4 rounded-xl text-center">\n                        <h4 class="font-semibold text-brand-sage">${window.i18n.get("modals.useCase.risk","Risk")}</h4>\n                        <p class="text-brand-charcoal">${e.Risk||"N/A"}/5</p>\n                    </div>\n                    <div class="bg-brand-offwhite p-4 rounded-xl text-center">\n                        <h4 class="font-semibold text-brand-sage">${window.i18n.get("modals.useCase.userEffortReduction","User Effort Reduction")}</h4>\n                        <p class="text-brand-charcoal">${e["User Effort Reduction"]||"N/A"}/5</p>\n                    </div>\n                    <div class="bg-brand-offwhite p-4 rounded-xl text-center">\n                        <h4 class="font-semibold text-brand-sage">${window.i18n.get("modals.useCase.technicalFeasibility","Technical Feasibility")}</h4>\n                        <p class="text-brand-charcoal">${e["Technical Feasibility"]||"N/A"}/5</p>\n                    </div>\n                </div>\n            `,g&&(g.classList.remove("hidden"),g.classList.add("flex")))}function s(){g&&(g.classList.remove("flex"),g.classList.add("hidden"))}function o(){function e(){window.innerWidth<768&&(n&&(n.style.display="none"),t&&(t.classList.remove("md:hidden"),t.classList.add("block")))}const n=document.getElementById("beehiiv-iframe"),t=document.getElementById("mobile-newsletter-fallback");n&&(n.addEventListener("load",()=>{}),n.addEventListener("error",()=>{e()}),setTimeout(()=>{n&&n.contentDocument&&n.contentDocument.body||e()},5e3))}const i=document.getElementById("use-cases-grid"),d=document.getElementById("use-case-filters"),l=document.getElementById("use-case-search");if(!i||!window.i18n||!window.i18n.loaded)return;const r=window.i18n.get("data.useCases",[]),c=[...new Set(r.flatMap(e=>e["User Segment"]?e["User Segment"].split(", "):[]))],m=[...new Set(r.map(e=>e.Category?e.Category.replace(/"/g,"").split(", ")[0]:"Other"))];l&&l.addEventListener("input",()=>{n()});const g=document.getElementById("use-case-modal"),u=document.getElementById("use-case-modal-content"),p=document.getElementById("close-use-case-modal");g&&p&&(g.addEventListener("click",e=>{e.target===g&&s()}),p.addEventListener("click",s)),document.addEventListener("keydown",e=>{"Escape"===e.key&&g&&!g.classList.contains("hidden")&&s()}),o(),window.addEventListener("resize",()=>{const e=document.getElementById("beehiiv-iframe"),n=document.getElementById("mobile-newsletter-fallback"),t=window.innerWidth<768;e&&n&&(t?(e.style.display="none",n.classList.remove("md:hidden"),n.classList.add("block")):(e.style.display="",n.classList.add("md:hidden"),n.classList.remove("block")))}),e(),n()}function populatePersonas(){const e=document.getElementById("personas-container");if(!e||!window.i18n||!window.i18n.loaded)return;const n=window.i18n.get("data.personas",[]);e.innerHTML="",n.forEach(n=>{const t=document.createElement("div");t.className="bg-white rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow duration-300 cursor-pointer",t.innerHTML=`\n            <div class="text-center">\n                <img src="${n.image}" alt="${n.name}" class="w-24 h-24 rounded-full mx-auto mb-4 object-cover">\n                <h3 class="text-xl font-bold text-brand-green mb-2">${n.name}</h3>\n                <p class="text-brand-sage font-semibold mb-2">${n.segment}</p>\n                <p class="text-sm text-brand-charcoal mb-4">${n.location}</p>\n                <button class="bg-brand-green text-white px-4 py-2 rounded-xl text-sm">\n                    ${window.i18n.get("modals.persona.learnMore","Learn More")}\n                </button>\n            </div>\n        `,t.addEventListener("click",()=>{openPersonaModal(n)}),e.appendChild(t)})}function openPersonaModal(e){const n=document.getElementById("persona-modal"),t=document.getElementById("persona-modal-content");n&&t&&(t.innerHTML=`\n            <div class="text-center mb-6">\n                <img src="${e.image}" alt="${e.name}" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover">\n                <h2 class="text-3xl font-bold text-brand-green mb-2">${e.name}</h2>\n                <p class="text-xl text-brand-sage">${e.segment}</p>\n                <p class="text-brand-charcoal">${e.location}</p>\n            </div>\n            \n            <div class="grid md:grid-cols-2 gap-6">\n                <div>\n                    <h3 class="text-xl font-semibold text-brand-sage mb-3">${window.i18n.get("modals.persona.profile","Profile")}</h3>\n                    <ul class="space-y-2 text-brand-charcoal">\n                        <li><strong>${window.i18n.get("modals.persona.age","Age")}:</strong> ${e.age}</li>\n                        <li><strong>${window.i18n.get("modals.persona.technicalLiteracy","Technical Literacy")}:</strong> ${e.technicalLiteracy}</li>\n                        ${e.landSize?`<li><strong>${window.i18n.get("modals.persona.landSize","Land Size")}:</strong> ${e.landSize}</li>`:""}\n                        ${e.primaryCrop?`<li><strong>${window.i18n.get("modals.persona.primaryCrop","Primary Crop")}:</strong> ${e.primaryCrop}</li>`:""}\n                        ${e.specialization?`<li><strong>${window.i18n.get("modals.persona.specialization","Specialization")}:</strong> ${e.specialization}</li>`:""}\n                        ${e.institution?`<li><strong>${window.i18n.get("modals.persona.institution","Institution")}:</strong> ${e.institution}</li>`:""}\n                        ${e.organization?`<li><strong>${window.i18n.get("modals.persona.organization","Organization")}:</strong> ${e.organization}</li>`:""}\n                    </ul>\n                </div>\n                \n                <div>\n                    <h3 class="text-xl font-semibold text-brand-sage mb-3">${window.i18n.get("modals.persona.challenges","Challenges")}</h3>\n                    <ul class="list-disc list-inside text-brand-charcoal mb-6">\n                        ${e.challenges.map(e=>`<li>${e}</li>`).join("")}\n                    </ul>\n                    \n                    <h3 class="text-xl font-semibold text-brand-sage mb-3">${window.i18n.get("modals.persona.goals","Goals")}</h3>\n                    <ul class="list-disc list-inside text-brand-charcoal">\n                        ${e.goals.map(e=>`<li>${e}</li>`).join("")}\n                    </ul>\n                </div>\n            </div>\n            \n            <div class="mt-6">\n                <h3 class="text-xl font-semibold text-brand-sage mb-3">${window.i18n.get("modals.persona.preferredFeatures","Preferred Features")}</h3>\n                <div class="flex flex-wrap gap-2">\n                    ${e.preferredFeatures.map(e=>`<span class="bg-brand-offwhite px-3 py-1 rounded-full text-sm text-brand-charcoal">${e}</span>`).join("")}\n                </div>\n            </div>\n        `,n.classList.remove("hidden"),n.classList.add("flex"))}function initLanguageSwitcher(){function e(){if(window.i18n&&window.i18n.loaded){const e=window.i18n.getCurrentLanguage();window.i18n.getLanguageDisplayNames()[e]||e.toUpperCase();o&&(o.textContent=e.toUpperCase())}}function n(){d=!d,d?s.classList.remove("hidden"):s.classList.add("hidden")}function t(){d=!1,s.classList.add("hidden")}if(languageSwitcherInitialized)return;const a=document.getElementById("language-switcher"),s=document.getElementById("language-dropdown"),o=document.getElementById("current-language"),i=document.querySelectorAll(".language-option");let d=!1;if(a&&s){a.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),n()});const e=e=>{!d||a.contains(e.target)||s.contains(e.target)||t()},o=e=>{"Escape"===e.key&&d&&t()};document.addEventListener("click",e),document.addEventListener("keydown",o),a._outsideClickHandler=e,a._escapeKeyHandler=o}i.forEach(n=>{n.addEventListener("click",async a=>{a.preventDefault(),a.stopPropagation();const s=n.getAttribute("data-lang");window.i18n&&s!==window.i18n.getCurrentLanguage()&&(await window.i18n.changeLanguage(s),e(),t())})}),e(),s&&s.classList.add("hidden"),languageSwitcherInitialized=!0}function initMobileMenu(){const e=document.getElementById("mobile-menu-toggle"),n=document.getElementById("mobile-menu");if(e&&n){let s=!1;function t(){s=!s,s?(n.classList.remove("hidden"),n.classList.remove("-translate-y-full"),n.classList.add("translate-y-0")):(n.classList.add("-translate-y-full"),n.classList.remove("translate-y-0"),setTimeout(()=>{s||n.classList.add("hidden")},500))}function a(){s&&t()}e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),t()});n.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",()=>{setTimeout(()=>{a()},100)})});n.querySelectorAll("button").forEach(e=>{e.addEventListener("click",()=>{setTimeout(()=>{a()},100)})});const o=a=>{!s||e.contains(a.target)||n.contains(a.target)||t()},i=e=>{"Escape"===e.key&&s&&t()};document.addEventListener("click",o),document.addEventListener("keydown",i),e._outsideClickHandler=o,e._escapeKeyHandler=i}}function closePersonaModal(){personaModal&&(personaModal.classList.remove("flex"),personaModal.classList.add("hidden"))}function initCookieBanner(){const e=document.getElementById("cookie-banner"),n=document.getElementById("cookie-preferences"),t=document.getElementById("accept-all"),a=document.getElementById("reject"),s=document.getElementById("customize"),o=document.getElementById("save-preferences"),i=document.getElementById("close-preferences"),d=document.getElementById("analytics-cookies"),l=document.getElementById("marketing-cookies");!localStorage.getItem("cookieConsent")&&e&&setTimeout(()=>{e.classList.add("show")},1e3),t&&t.addEventListener("click",()=>{localStorage.setItem("cookieConsent",JSON.stringify({necessary:!0,analytics:!0,marketing:!0,timestamp:Date.now()})),e.classList.remove("show")}),a&&a.addEventListener("click",()=>{localStorage.setItem("cookieConsent",JSON.stringify({necessary:!0,analytics:!1,marketing:!1,timestamp:Date.now()})),e.classList.remove("show")}),s&&s.addEventListener("click",()=>{n.classList.add("show");const e=JSON.parse(localStorage.getItem("cookieConsent")||"{}");d&&(d.checked=e.analytics||!1),l&&(l.checked=e.marketing||!1)}),o&&o.addEventListener("click",()=>{const t={necessary:!0,analytics:!!d&&d.checked,marketing:!!l&&l.checked,timestamp:Date.now()};localStorage.setItem("cookieConsent",JSON.stringify(t)),n.classList.remove("show"),e.classList.remove("show")}),i&&i.addEventListener("click",()=>{n.classList.remove("show")}),n&&n.addEventListener("click",e=>{e.target===n&&n.classList.remove("show")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&n&&n.classList.contains("show")&&n.classList.remove("show")})}Element.prototype.closest||(Element.prototype.closest=function(e){for(var n=this;n;){if(n.matches(e))return n;n=n.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var n=(this.document||this.ownerDocument).querySelectorAll(e),t=n.length;--t>=0&&n.item(t)!==this;);return t>-1});let languageSwitcherInitialized=!1;document.addEventListener("DOMContentLoaded",()=>{initMobileMenu();const e=()=>{window.i18n&&window.i18n.loaded?(populateCapabilities(),populateUseCases(),populatePersonas(),initLanguageSwitcher()):setTimeout(e,100)};window.addEventListener("i18nReady",()=>{populateCapabilities(),populateUseCases(),populatePersonas(),initLanguageSwitcher()}),e()}),window.addEventListener("languageChanged",()=>{populateCapabilities(),populateUseCases(),populatePersonas();const e=document.getElementById("current-language");e&&window.i18n&&(e.textContent=window.i18n.getCurrentLanguage().toUpperCase())});const personaModal=document.getElementById("persona-modal"),closePersonaModalBtn=document.getElementById("close-persona-modal");personaModal&&personaModal.addEventListener("click",e=>{e.target===personaModal&&closePersonaModal()}),closePersonaModalBtn&&closePersonaModalBtn.addEventListener("click",closePersonaModal),document.addEventListener("keydown",e=>{"Escape"===e.key&&personaModal&&!personaModal.classList.contains("hidden")&&closePersonaModal()}),initCookieBanner();